// NUEVA FUNCIÃ“N uploadVideo PARA video.html
// Reemplaza la funciÃ³n uploadVideo completa (lÃ­neas 736-819)

async uploadVideo() {
    const title = document.getElementById('videoTitleInput').value.trim();
    const videoUrl = document.getElementById('videoUrlInput').value.trim();
    const category = document.getElementById('videoCategoryInput').value.trim();
    const reward = document.getElementById('videoRewardInput').value.trim();
    const emoji = document.getElementById('videoEmojiInput').value.trim();
    const isReel = document.getElementById('isReelInput').checked;

    if (!title) {
        UIController.notify('Ingresa un tÃ­tulo para el video', 'error');
        return;
    }

    if (!videoUrl) {
        UIController.notify('Ingresa la URL del video', 'error');
        return;
    }

    // Validar que sea una URL vÃ¡lida
    try {
        new URL(videoUrl);
    } catch (e) {
        UIController.notify('La URL ingresada no es vÃ¡lida', 'error');
        return;
    }

    document.getElementById('btnUpload').disabled = true;
    document.getElementById('btnUpload').style.opacity = '0.5';

    try {
        UIController.notify('ðŸ“¤ Guardando video...', 'info');

        // Guardar metadata en backend
        const videoData = {
            url: videoUrl,
            title: title,
            category: category || 'General',
            reward: parseFloat(reward) || 0,
            emoji: emoji || 'ðŸŽ¬',
            isReel: isReel,
            ownerPublicKey: this.user.publicKey,
            duration: 0
        };

        const response = await fetch(`${Config.getVideosUrl()}/add`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(videoData)
        });

        if (!response.ok) throw new Error('Error al guardar video');

        UIController.notify('ðŸŽ‰ Â¡Video publicado exitosamente!', 'success');

        // Limpiar formulario
        document.getElementById('videoUrlInput').value = '';
        document.getElementById('videoTitleInput').value = '';
        document.getElementById('videoCategoryInput').value = '';
        document.getElementById('videoRewardInput').value = '';
        document.getElementById('videoEmojiInput').value = 'ðŸŽ¬';
        document.getElementById('isReelInput').checked = false;
        document.getElementById('btnUpload').disabled = false;
        document.getElementById('btnUpload').style.opacity = '1';

        // Recargar videos
        await VideoManager.loadVideos(Config.getVideosUrl());
        UIController.renderVideosGrid(VideoManager);
        UIController.renderReels(VideoManager);
        UIController.renderMyVideosTable(VideoManager);
        UIController.updateStats(VideoManager);

        // Ir a la pestaÃ±a de mis videos
        document.querySelector('[data-section="myVideos"]').click();

    } catch (error) {
        console.error('Error al publicar video:', error);
        UIController.notify('Error al publicar video', 'error');
        document.getElementById('btnUpload').disabled = false;
        document.getElementById('btnUpload').style.opacity = '1';
    }
},
